# claude-nagger 設定ファイル

# セッション開始時設定
session_startup:
  enabled: true
  messages:
    first_time:
      title: "プロジェクトセットアップ"
      main_text: |
        前提:
        [ ] hookブロック後はリトライ(1回限り通知のため2回目は通過する)
        委譲規約:
        [ ] 直接作業せず、カスタムagentへ委譲する（コンテクスト節約のため）
        [ ] SubAgentからはissue_idのみ受け取り、成果物をレビューする
        [ ] [要判断]フラグは優先対応
        TiDD規約:
        [ ] 意思決定の経緯・意図をRedmineチケットコメントに記録する（簡潔に）
        ワークフロー参照（タスクに応じて取捨選択）:
          要件定義 → scribe（チケット起票・タスク分解）
          技術調査 → researcher（並列調査・結果集約）
          意思決定 → オーナにpro/con提示
          実装     → coder（並列実装・完了集約）
          テスト   → tester（テスト実行・結果確認）
          受入     → オーナ確認 → scribeでクローズ
      severity: "block"

    # 2回目以降（継続セッション）
    repeated:
      title: "協働規約再確認"
      main_text: |
        [ ] hookブロック後はリトライ(1回限り通知)
        [ ] SubAgentからはissue_idのみ受け取り、成果物をレビューする
        [ ] [要判断]フラグは優先対応
        [ ] 意思決定はRedmineコメントに記録する
      severity: "block"

  # subagent別override設定
  # ※ Leader向けではなく、subagent自身に直接ブロッキング通知される
  # 仕組み: SubagentStart hook → マーカー作成 → 次のPreToolUseでsubagentをブロック
  # 解決順序: base(上記) → subagent_default → subagent_types.{type}
  # namespaced対応: "my-plugin:coder" → "coder" にフォールバック
  overrides:
    subagent_default:
      messages:
        first_time:
          title: "subagent規約"
          main_text: |
            [ ] hookブロック後はリトライ(1回限り通知)
            [ ] Leaderへはissue_idのみ返す（詳細はRedmineコメント参照）
            [ ] 判断が必要な場合: issue_id [要判断] を返す
    subagent_types:
      Explore:
        enabled: false
      Plan:
        enabled: false
      Bash:
        messages:
          first_time:
            title: "Bash subagent規約"
            main_text: |
              [ ] 破壊的コマンド禁止

# コンテキスト管理設定
context_management:
  reminder_thresholds:
    light_warning: 30000
    medium_warning: 60000
    critical_warning: 100000

# suggest-rules設定（セッション終了時の規約提案機能）
suggest_rules:
  enabled: true  # false: 規約提案機能を無効化

# デバッグ設定
debug:
  enable_logging: true
