# claude-nagger 設定ファイル

# セッション開始時設定
session_startup:
  enabled: true
  messages:
    first_time:
      title: "プロジェクトセットアップ"
      main_text: |
        [ ] チケット駆動開発: MCPツールのルールに従いチケットに報告を行うこと
        [ ] 選択肢がある場合はオーナに提示し指示を仰ぐこと(pro/con付き)
        [ ] チケット読み取り(一覧・詳細・構造)はticket-manager subagentに委譲すること(コンテクスト削減)
        [ ] チケット書き込み(起票・更新・コメント)はleader直接実行可
        [ ] コードを直接編集しないこと(coder subagentに委譲)
        [ ] USをTask粒度に分解してからcoderに渡すこと
        [ ] coder成果物を必ずレビューすること(git diff確認)
        [ ] hookブロック後はリトライすること(1回限りの通知のため2回目は通過する)
      severity: "block"

    # 2回目以降（継続セッション）
    repeated:
      title: "協働規約再確認"
      main_text: |
        [ ] チケット駆動開発: チケットに報告を行うこと
        [ ] 選択肢提示時はpro/con付きでオーナに確認
        [ ] チケット読み取りはticket-manager subagentに委譲
        [ ] チケット書き込みはleader直接実行可
        [ ] コード編集はcoder subagentに委譲
        [ ] coder成果物をレビュー(git diff確認)
        [ ] hookブロック後はリトライ(1回限り通知)
      severity: "block"

  # subagent別override設定
  # 解決順序: base(上記) → subagent_default → subagent_types.{type}
  overrides:
    subagent_default:
      messages:
        first_time:
          title: "subagent規約"
          main_text: |
            [ ] スコープ外のファイルを編集しないこと
            [ ] 作業完了後に結果を報告すること
    subagent_types:
      Explore:
        enabled: false
      Plan:
        enabled: false
      Bash:
        messages:
          first_time:
            title: "Bash subagent規約"
            main_text: |
              [ ] 破壊的コマンド禁止
      ticket-manager:
        messages:
          first_time:
            title: "チケット管理agent規約"
            main_text: |
              [ ] Redmineチケット操作のみ行うこと
              [ ] コード変更は行わないこと
              [ ] ステータス変更時はルールに従うこと
      coder:
        messages:
          first_time:
            title: "coder subagent規約"
            main_text: |
              [ ] チケット番号(issue_{id})をコミットメッセージに含めること
              [ ] 指示されたスコープ外のファイルを編集しないこと
              [ ] 判断が必要な場合は実装せず報告すること
              [ ] 完了時に変更内容・コミットハッシュを報告すること

# コンテキスト管理設定
context_management:
  reminder_thresholds:
    light_warning: 30000
    medium_warning: 60000
    critical_warning: 100000

# デバッグ設定
debug:
  enable_logging: true
